<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <title>üçö BrokenCTF ‚Äî Cyber Scavenger Hunt</title>
  <script src="https://code.jquery.com/jquery-1.7.2.min.js"></script> <!-- OLD jQuery vulnerable -->

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    $(document).ready(function() {
      var query = new URLSearchParams(window.location.search).get('search');
      if (query) {
        $("#search-box").html(query);  // UNSAFE: Will allow XSS
      }
    });
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="0b9d45bb-c360-4d54-9888-5a63c6ae8ebc"></script>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          animation: {
            flicker: 'flicker 2s infinite',
          },
          keyframes: {
            flicker: {
              '0%, 100%': { opacity: 1 },
              '50%': { opacity: 0.6 }
            }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white font-sans">

<!-- üåó Dark Mode Toggle -->
<div class="flex justify-end p-4">
  <button onclick="document.documentElement.classList.toggle('dark')"
    class="bg-gray-300 dark:bg-gray-700 text-black dark:text-white px-4 py-1 rounded text-sm">
    üåó Toggle Mode
  </button>
</div>

<!-- üëÆÔ∏è‚Äç‚ôÇÔ∏è Navbar -->
<header class="bg-white dark:bg-gray-800 shadow sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">BrokenCTF Store üè¥‚Äç‚ò†Ô∏è</h1>
    <div class="flex space-x-6 text-sm">
      {% if session.get('name') %}
        <span class="text-indigo-400">Hi, {{ session['name'] }}</span>
        <span class="text-green-400">| You have {{ 33 - (session['solved']|length) }} flags left</span>
        <a href="/auth/logout" class="text-indigo-700 dark:text-indigo-300 hover:underline">Logout</a>
      {% else %}
        <a href="/register" class="text-indigo-700 dark:text-indigo-300 hover:underline">Register</a>
        <a href="/auth/login" class="text-indigo-700 dark:text-indigo-300 hover:underline">Login</a>
      {% endif %}
      <a href="/cart" class="text-indigo-700 dark:text-indigo-300 hover:underline">Cart</a>
    </div>
  </div>
</header>

<!-- üåü Hero -->
<div class="bg-gradient-to-r from-indigo-600 to-blue-500 text-white py-10 text-center">
  <h2 class="text-3xl font-bold">Find Everything. Maybe Too Much.</h2>
  <p class="text-lg mt-2">Electronics, tools, gear, secrets? Depends where you click.</p>
</div>

<!-- üîç Search & Tags -->
<div class="max-w-7xl mx-auto px-4 py-6 flex flex-col sm:flex-row justify-between items-center">
  <input id="search-input" type="text" placeholder="Search 10,000+ items..." class="w-full sm:w-2/3 border p-2 rounded-md shadow-sm mb-4 sm:mb-0">
  <div class="space-x-2">
    <span class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-sm rounded-full">Electronics</span>
    <span class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-sm rounded-full">Networking</span>
    <span class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-sm rounded-full">Storage</span>
    <span class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-sm rounded-full">Peripherals</span>
  </div>
</div>
<div id="search-box" class="max-w-7xl mx-auto p-4 text-center text-yellow-400 text-xl"></div>
<div id="flag" style="display:none;">FLAG-XSS-OWNED-999</div>

<!-- üõí Product Grid -->
<section id="product-grid" class="max-w-7xl mx-auto px-4 py-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const products = [
      "Mechanical Keyboard", "Fake CCTV Camera", "2TB External Drive", "Blue Light Glasses",
      "USB-C Adapter", "27\" IPS Monitor", "CTF Mug", "Gigabit Switch", "10ft Ethernet Cable",
      "Tactical Flashlight", "Bluetooth Dongle", "Raspberry Pi 4", "Hacker Notebook",
      "Noise Cancelling Headphones", "32GB SD Card", "Hacker Stickers Pack (10x)", "BoomBox Speaker",
      "Portable SDR Scanner", "Smartphone Tap Blocker", "Encrypted USB Stick",
      "Hidden Camera Detector", "Voice Changer Module", "Ghost Keylogger", "Spy Bug Detector",
      "WiFi Deauther", "NFC Hacking Kit", "Proxmark3 Cloner", "Flipper Zero", "Bash Bunny",
      "Signal Jammer Mini"
    ];

    const productGrid = document.getElementById("product-grid");
    products.forEach(name => {
      const card = document.createElement("div");
      card.className = "bg-white dark:bg-gray-800 p-4 rounded-lg shadow hover:shadow-xl transition";
      card.setAttribute("data-name", name.toLowerCase());
      card.innerHTML = `
        <div class="h-40 bg-gray-300 dark:bg-gray-700 rounded mb-3 flex items-center justify-center">
          <span class="text-2xl">üîß</span>
        </div>
        <h2 class="text-lg font-semibold">${name}</h2>
        <p class="text-sm text-gray-600 dark:text-gray-400">Top-tier tool for CTF enthusiasts.</p>
        <div class="mt-2 flex justify-between items-center">
          <span class="text-green-600 font-bold">$${(Math.random() * 90 + 10).toFixed(2)}</span>
          <button class="text-sm bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-500">Add to Cart</button>
        </div>
      `;
      productGrid.appendChild(card);
    });

    const searchInput = document.getElementById("search-input");
    searchInput.addEventListener("input", function () {
      const term = this.value.toLowerCase();
      document.querySelectorAll("#product-grid > div").forEach(card => {
        const itemName = card.getAttribute("data-name");
        card.style.display = itemName.includes(term) ? "block" : "none";
      });
    });
  });
</script>
</body>
</html>
